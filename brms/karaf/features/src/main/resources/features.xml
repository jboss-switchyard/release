<?xml version='1.0' encoding='UTF-8'?>
<features name="switchyard-${project.version}">

    <repository>mvn:org.switchyard.karaf/switchyard/${project.version}/xml/features</repository>
    <repository>mvn:org.drools/drools-karaf-features/${version.org.drools}/xml/features</repository>
 


    <feature name="switchyard-common-knowledge" version="${project.version}" resolver="(obr)">
        <feature>jndi</feature>
        <feature version="${version.org.hibernate.features}">hibernate</feature>
        <feature version="${project.version}">switchyard</feature>
        <feature version="${version.org.drools}">drools-decisiontable</feature>
        <feature version="${version.org.jbpm}">jbpm</feature>
        <bundle>wrap:mvn:org.eclipse.aether/aether-api/${version.org.eclipse.aether.aether-api}</bundle><!-- ${version.org.eclipse.aether} -->
        <bundle>wrap:mvn:org.jbpm/jbpm-executor/${version.org.jbpm}$DynamicImport-Package=org.hibernate.*,javassist.*</bundle>
        <bundle>wrap:mvn:org.jbpm/jbpm-workitems/${version.org.jbpm}</bundle>
        <bundle>wrap:mvn:org.kie/kie-ci/${version.org.kie}</bundle>
        <bundle>wrap:mvn:org.kie.remote/kie-remote-client/${version.org.kie}</bundle>
        <bundle>wrap:mvn:org.kie.remote/kie-remote-common/${version.org.kie}</bundle>
        <bundle>wrap:mvn:org.kie.remote/kie-remote-jaxb/${version.org.kie}</bundle>
        <bundle>mvn:org.switchyard.components/switchyard-component-common/${project.version}</bundle>
        <bundle>mvn:org.switchyard.components/switchyard-component-common-knowledge/${project.version}</bundle>
    </feature>

    <feature name="switchyard-rules" version="${project.version}" resolver="(obr)">
        <feature version="${project.version}">switchyard-common-knowledge</feature>
        <bundle>mvn:org.switchyard.components/switchyard-component-rules/${project.version}</bundle>
    </feature>

    <feature name="switchyard-bpm" version="${project.version}" resolver="(obr)">
        <feature version="${project.version}">switchyard-common-knowledge</feature>
        <bundle>mvn:org.switchyard.components/switchyard-component-bpm/${project.version}</bundle>
    </feature>



    <!-- Switchyard Quickstarts -->

    <feature name="switchyard-quickstart-bpm-service" version="${project.version}" resolver="(obr)">
        <feature version="${project.version}">switchyard-bean</feature>
        <feature version="${project.version}">switchyard-soap</feature>
        <feature version="${project.version}">switchyard-bpm</feature>
        <bundle>mvn:org.switchyard.quickstarts/switchyard-bpm-service/${project.version}</bundle>
    </feature>

  
    
    <feature name="switchyard-quickstart-remote-invoker" version="${project.version}" resolver="(obr)">
        <feature version="${project.version}">switchyard-bean</feature>
        <feature version="${project.version}">switchyard-rules</feature>
        <feature version="${project.version}">switchyard-sca</feature>
        <bundle>mvn:org.switchyard.quickstarts/switchyard-remote-invoker/${project.version}</bundle>
    </feature>
    


    <feature name="switchyard-quickstart-rules-camel-cbr" version="${project.version}" resolver="(obr)">
        <feature version="${project.version}">switchyard-bean</feature>
        <feature version="${project.version}">switchyard-camel</feature>
        <feature version="${project.version}">switchyard-rules</feature>
        <feature version="${project.version}">switchyard-sca</feature>
        <bundle>mvn:org.switchyard.quickstarts/switchyard-rules-camel-cbr/${project.version}</bundle>
    </feature>

    <feature name="switchyard-quickstart-rules-interview" version="${project.version}" resolver="(obr)">
        <feature version="${project.version}">switchyard-bean</feature>
        <feature version="${project.version}">switchyard-soap</feature>
        <feature version="${project.version}">switchyard-rules</feature>
        <bundle>mvn:org.switchyard.quickstarts/switchyard-rules-interview/${project.version}</bundle>
    </feature>

    <feature name="switchyard-quickstart-rules-interview-container" version="${project.version}" resolver="(obr)">
        <feature version="${project.version}">switchyard-bean</feature>
        <feature version="${project.version}">switchyard-soap</feature>
        <feature version="${project.version}">switchyard-rules</feature>
        <bundle>mvn:org.switchyard.quickstarts/switchyard-rules-interview-container/${project.version}</bundle>
    </feature>

    <feature name="switchyard-quickstart-rules-interview-dtable" version="${project.version}" resolver="(obr)">
        <feature version="${project.version}">switchyard-bean</feature>
        <feature version="${project.version}">switchyard-soap</feature>
        <feature version="${project.version}">switchyard-rules</feature>
        <bundle>mvn:org.switchyard.quickstarts/switchyard-rules-interview-dtable/${project.version}</bundle>
    </feature>

 

    <feature name="switchyard-demo-library" version="${project.version}" resolver="(obr)">
        <feature version="${project.version}">switchyard-soap</feature>
        <feature version="${project.version}">switchyard-bpm</feature>
        <feature version="${project.version}">switchyard-rules</feature>
        <bundle>mvn:org.switchyard.quickstarts.demos/switchyard-demo-library/${project.version}</bundle>
    </feature>


    <!-- XXX: this needs some love -->
    <feature name="switchyard-demo-helpdesk" version="${project.version}" resolver="(obr)">
        <!-- hibernate must be before bpm -->
        <feature version="${project.version}">switchyard-bean</feature>
        <feature version="${project.version}">switchyard-soap</feature>
        <feature version="${project.version}">switchyard-bpm</feature>

        <!-- jbpm-kie-services needs to export org.jbpm.kie.services.impl.model for Serviceorm.xml...
        <bundle dependency="true">mvn:org.jbpm/jbpm-shared-services/${version.org.jbpm}</bundle>
        <bundle dependency="true">mvn:org.jbpm/jbpm-services-api/${version.org.jbpm}</bundle>
        <bundle dependency="true">wrap:mvn:org.scannotation/scannotation/${version.org.scannotation}</bundle>
        <bundle dependency="true">mvn:org.jbpm/jbpm-kie-services/${version.org.jbpm}</bundle>
         -->

        <!-- cdi web support -->
        <feature version="${version.org.ops4j.pax.cdi}">pax-cdi-1.2-web-weld</feature>

        <!-- Database support -->        
        <bundle>mvn:com.h2database/h2/${version.com.h2database}</bundle>

        <!-- JSF Dependencies -->
        <bundle dependency="true">mvn:commons-collections/commons-collections/${version.commons-collections}</bundle>
        <bundle dependency="true">mvn:commons-codec/commons-codec/${version.commons-codec}</bundle>
        <bundle dependency="true">mvn:commons-beanutils/commons-beanutils/${version.commons-beanutils}</bundle>
        <bundle dependency="true">mvn:commons-digester/commons-digester/${version.commons-digester}</bundle>
        <bundle dependency="true">mvn:org.apache.myfaces.core/myfaces-bundle/${version.org.apache.myfaces.core.myfaces-bundle}</bundle>
        <bundle dependency="true">mvn:org.apache.geronimo.specs/geronimo-validation_1.0_spec/${version.org.apache.geronimo.specs.geronimo-validation_1.0_spec}</bundle>
        
        <bundle>mvn:org.switchyard.quickstarts.demos/switchyard-demo-helpdesk/${project.version}/war</bundle>
    </feature>

</features>
